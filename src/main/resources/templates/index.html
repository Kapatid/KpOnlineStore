<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
  <head th:replace="../fragments/header"></head>
  <body>
    <div id="home">
      <!--carousel-->
      <div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active" data-bs-interval="10000">
            <img th:src="@{'/img/placeholder_carousel.png'}" class="d-block w-100" alt="carousel">
          </div>
          <div class="carousel-item" data-bs-interval="2000">
            <img th:src="@{'/img/placeholder_carousel.png'}" class="d-block w-100" alt="carousel">
          </div>
          <div class="carousel-item">
            <img th:src="@{'/img/placeholder_carousel.png'}" class="d-block w-100" alt="carousel">
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
      <!--
      <p th:if="${userRole == 'USER' || userRole == 'ADMIN'}">
        Hello
        <span th:text="${userFirstname + ' ' + userLastname}"></span>
        <button><a th:href="@{/profile}">PROFILE</a></button>
      </p>
      -->
      <div class="defaultMargin py-5 ">
        <div class="d-flex align-items-center py-3">
          <h1 class="mr-auto mb-0">BEST SELLERS</h1>
          <a th:href="@{'/store/1/addFilters?bestSeller=bestSeller'}"><button class="seeMore">SEE MORE ></button></a>
        </li>
        </div>
        <div class="row">
          <div th:if="${bestSellers.empty}">No products available</div>
          <div class="col-2 py-2" th:each="product: ${bestSellers}">
            <a th:href="@{|/product/${product.id}|}">
              <div class="card card-product d-flex align-items-center" style="width: 12rem;"> 
                <div class="card-product-image-container d-flex align-items-center">
                  <div>
                    <img th:src="${product.image}" th:alt="${product.productName + '-img.png'}" class="card-product-image"/>
                  </div>
                </div>
                <div class="card-body card-product-body mr-auto">
                  <h4 class="product-name" th:text="${product.productName}"></h4>
                  <!-- <p class="product-category" th:text="${product.category}"></p> -->
                  <h3 class="product-price" th:text="${'â‚± ' + product.price}"></h3>
                  <div th:each="i : ${#numbers.sequence(1, product.rating)}" class="container-star">
                    <form th:action="@{/rate}" method="POST">
                      <input type="hidden" name="rating" th:value="${i}" />
                      <input type="hidden" name="productId" th:value="${product.id}" />
                      <i class="fas fa-star star"></i>
                    </form>
                  </div>
                  <div th:if="${product.rating < 5}" th:each="i : ${#numbers.sequence(1, 5 - product.rating)}" class="container-star">
                    <form th:action="@{/rate}" method="POST">
                      <input type="hidden" name="rating" th:value="${i + product.rating}" />
                      <input type="hidden" name="productId" th:value="${product.id}" />
                      <i class="far fa-star star"></i>
                    </form>
                  </div>
                </div>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>

    <footer th:replace="../fragments/footer"></footer>
  </body>
</html>
