<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
  <head th:replace="../fragments/header"></head>

  <style>
    /* Eto power ng css Jeremy */
    /*                 - Nadji */
    input, label {
      display:  block;
    }

    label {
      pointer-events: none;
    }

    input, select {
      border-radius: 20px;
      width: 100%;
    }

    form {
      display: grid;
      place-items: center;
      width: 60%;
    }

    section {
      width: 100%;
      margin: 0.6rem;
      display: grid;
      grid-gap: 1rem;
      grid-template-columns: repeat(3, 0.5fr);
    }


    section:nth-of-type(1){
      grid-template-columns: repeat(2, 0.5fr);
    }
    section:nth-of-type(2) > div{
      grid-column: span 3;
    }
    section:nth-of-type(4) > div{
      grid-column: span 3;
    }
    section:nth-of-type(5) [id*="expiration-date-"]{
      width: 45%;
    }

    #summary {
      display: grid;
      place-items: center;
      width: 30%;
    }

    #summary > div {
      font-size: 0.84rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    }
    #summary > div:nth-of-type(2) {
      border-bottom: 1px solid black;
      margin-bottom: 5px;
    }
  </style>

  <body>
    <div id="home">
      <p>Hello <span
        th:text="${#authentication.getPrincipal().getFirstName() + ' ' + #authentication.getPrincipal().getLastName() + '!'}"
      ></span> <button><a th:href="@{/profile}">PROFILE</a></button></p>
      <form th:action="@{/logout}" method="POST">
        <button type="submit" class="submit">Logout</button>
      </form>

      <form action="">
        <section class="form-field">
          <div>
            <label for="first-name">First name</label>
            <input type="text" id="first-name" name="firstName" />
          </div>
          <div>
            <label for="last-name">Last name</label>
            <input type="text" id="last-name" name="lastName" />
          </div>
        </section>
        <section class="form-field">
          <div>
            <label for="address">Address</label>
            <input type="text" id="address" name="address" />
          </div>
        </section>
        <section class="form-field">
          <div>
            <label for="region">Region</label>
            <input type="text" id="region" name="region" />
          </div>
          <div>
            <label for="city">City</label>
            <input type="text" id="city" name="city" />
          </div>
          <div>
            <label for="postal-code">Postal Code</label>
            <input type="text" id="postal-code" name="postalCode" maxlength="4" placeholder="xxxx"/>
          </div>
        </section>
        <section class="form-field">
          <div>
            <label for="phone-number">Phone Number</label>
            <input id="phone-number" type="text" maxlength="11"/>
          </div>
        </section>
        <section class="form-field">
          <div>
            <label for="card-number">Card Number</label>
            <input id="ccn" type="text" placeholder="xxxx xxxx xxxx xxxx"/>
            <div id="ccn-type" style="font-size: 0.8rem; font-style: italic; text-transform:capitalize;">Type:</div>
          </div>
          <div>
            <label for="expiration-date-1">Expiration Date</label>
            <select id="expiration-date-1" name="expiration-date-1">
              <option value="1">1</option>
              <option value="2">2</option>
            </select>
            <select id="expiration-date-2" name="expiration-date-2">
              <option value="1">1</option>
              <option value="2">2</option>
            </select>
          </div>
          <div>
            <label for="security-code"></label>Security Code</label>
            <input type="text" id="security-code" name="security-code" maxlength="3" placeholder="xxx"/>
          </div>
        </section>

        <div id="summary">
          <h3>ORDER SUMMARY</h3>
          <div>
            <div>QUANTITY</div>
            <div th:text="${cart.getNumberOfProducts()}"></div>
          </div>
          <div th:if="${cart.useVoucher == 1}">
            <div>VOUCHER DISCOUNT</div>
            <div th:each="voucher : ${cart.vouchers}">
              <div th:text="${'-' + voucher.discount + '%'}"></div>
            </div>
          </div>
          <div>
            <div>TOTAL COST: </div>
            <div th:if="${cart.useVoucher == 1}" th:text="${'₱ ' + cart.getDiscountedPrice()}"></div>
            <div th:if="${cart.useVoucher == 0}" th:text="${'₱ ' + cart.getTotalOrderPrice()}"></div>
          </div>
        </div>
      </form>

      <form th:action="@{/checkout}" method="post">
        <button type="submit">CONFIRM PURCHASE</button>
      </form>
      <button><a th:href="@{/cart/home}">GO BACK</a></button>
    </div>

    <div th:replace="../fragments/footer.html"></div>
    <script
      defer
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/cleave.js/1.6.0/cleave.min.js"
    ></script>
  </body>
</html>
